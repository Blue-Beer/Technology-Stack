# Clear Architecture Review

软件的架构是软件拆解业务实现逻辑的结构化的表征。

清晰架构的宗旨是面对一个需求快速迭代的业务，能够最小化创建和维护软件的成本。

```txt
com.xxx.biz
|--adapter
|--|--driving //primary adapter
|--|--driven  //secondary adapter
|--application
|--|--usecase //用户用例
|--|--|--command //命令类型的用户用例，会改变系统的状态
|--|--|--query //查询类的用户用例，不改变系统的状态，主要为Web页面提供各种查询
|--domain
|--|--context // 业务上下文
|--|--core
|--|--|--concepts //领域对象概念接口
|--|--|--exception //领域异常
```

架构特点：

- 一个核心 domin
- 抽象性往内递增
- 外层依赖内层 当领域层需要依赖最外层的接收参数时，让二者共通依赖一个更核心的抽象接口
- 层与层之间通过接口与适配器进行交流。API,数据库操作通过适配器实现，内部发不同层级之间用过接口交流。

领域的上下文 指的就是领域内的关键业务逻辑，最不可能发生变化的部分，关键业务逻辑应该是系统中最独立和可重用的代码。所以核心中的类中不仅要定义该类在内存中需要的变量，对这些变量的核心业务逻辑也要在此处定义。

用例 是应用程序的业务逻辑。用例关注与输入数据并产生输出数据，但用例对象不应去关心数据如何传递给用户或其他任何组件。在用例中的业务逻辑最丰富，这里的逻辑随着需求的变更会频繁改变。

适配器 将实体和用例转化为更适用外层使用的形式。将外部数据转化为用例或实体使用的内部形式。这一层最强大的工具就是依赖倒置。
